"use strict";(self["webpackChunkapi_todolist"]=self["webpackChunkapi_todolist"]||[]).push([[638],{8602:function(e,t,a){a.d(t,{k:function(){return s}});var o=a(2261),l=a(144),n=a(4373),r=a(7781);const s=(0,o.nY)("userStore",()=>{const e=(0,l.KR)(""),t=(0,l.KR)(""),a=(0,l.KR)(!1),o=(o,l)=>n.A.post("https://todoo.5xcamp.us/users/sign_in",{user:{email:o,password:l}}).then(o=>((0,r.P)("success","登入成功"),e.value=o.headers.authorization,t.value=o.data.nickname,a.value=!0,localStorage.setItem("token",e.value),localStorage.setItem("nickname",t.value),n.A.defaults.headers.common.Authorization=e.value,!0)).catch(()=>!1),s=()=>{e.value="",t.value="",a.value=!1,localStorage.removeItem("token"),localStorage.removeItem("nickname"),delete n.A.defaults.headers.common.Authorization},u=()=>{const o=localStorage.getItem("token"),l=localStorage.getItem("nickname");o&&l&&(e.value=o,t.value=l,a.value=!0,n.A.defaults.headers.common.Authorization=o)};return{token:e,nickname:t,isLogin:a,login:o,logout:s,checkLogin:u}})},9638:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});a(4114);var o=a(6768),l=a(5130),n=a(144),r=a(1387),s=a(8602),u=a(7781);const i={class:"col-12 mb-3"},c={class:"col-12 mb-4"},d={class:"text-center"};var m={__name:"Login",setup(e){const t=(0,n.KR)(""),a=(0,n.KR)(""),m=(0,s.k)(),v=(0,r.rd)(),k=async()=>{t.value.trim()&&a.value.trim()||(0,u.P)("error","Email 和密碼不得為空"),m.login(t.value,a.value).then(e=>{e?v.push("/todo"):(0,u.P)("error","請確認帳號密碼是否正確")})};return(e,n)=>{const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[n[6]||(n[6]=(0,o.Lk)("h3",{class:"text-secondary fw-bold mb-3 text-center text-md-start"},"最實用的線上代辦事項服務",-1)),(0,o.Lk)("form",{onSubmit:(0,l.D$)(k,["prevent"])},[(0,o.Lk)("div",i,[n[2]||(n[2]=(0,o.Lk)("label",{for:"mail01",class:"form-label"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"mail01",class:"form-control mail01",placeholder:"請輸入Email",required:"","onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),(0,o.Lk)("div",c,[n[3]||(n[3]=(0,o.Lk)("label",{for:"pwd01",class:"form-label"},"密碼",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"pwd01",class:"form-control pwd01",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),n[5]||(n[5]=(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("button",{type:"submit",class:"btn btn-secondary h5",id:"login01",style:{width:"128px"}},"登入")],-1)),(0,o.Lk)("div",d,[(0,o.bF)(r,{to:"/register",class:"btn",id:"register01"},{default:(0,o.k6)(()=>n[4]||(n[4]=[(0,o.eW)("註冊帳號")])),_:1,__:[4]})])],32)],64)}}};const v=m;var k=v}}]);
//# sourceMappingURL=638.582e36f4.js.map