"use strict";(self["webpackChunkapi_todolist"]=self["webpackChunkapi_todolist"]||[]).push([[919],{8602:function(e,t,o){o.d(t,{k:function(){return s}});var l=o(2261),n=o(144),a=o(4373),c=o(7781);const s=(0,l.nY)("userStore",()=>{const e=(0,n.KR)(""),t=(0,n.KR)(""),o=(0,n.KR)(!1),l=(l,n)=>a.A.post("https://todoo.5xcamp.us/users/sign_in",{user:{email:l,password:n}}).then(l=>((0,c.P)("success","登入成功"),e.value=l.headers.authorization,t.value=l.data.nickname,o.value=!0,localStorage.setItem("token",e.value),localStorage.setItem("nickname",t.value),a.A.defaults.headers.common.Authorization=e.value,!0)).catch(()=>!1),s=()=>{e.value="",t.value="",o.value=!1,localStorage.removeItem("token"),localStorage.removeItem("nickname"),delete a.A.defaults.headers.common.Authorization},i=()=>{const l=localStorage.getItem("token"),n=localStorage.getItem("nickname");l&&n&&(e.value=l,t.value=n,o.value=!0,a.A.defaults.headers.common.Authorization=l)};return{token:e,nickname:t,isLogin:o,login:l,logout:s,checkLogin:i}})},8919:function(e,t,o){o.r(t),o.d(t,{default:function(){return j}});o(4114);var l=o(6768),n=o(4232),a=o(5130),c=o(144),s="data:image/png;base64,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",i=(o(8111),o(2489),o(7588),o(1701),o(2261)),d=o(4373),r=o(7781);const u=(0,i.nY)("todoStore",()=>{const e=(0,c.KR)([]),t=(0,c.KR)("all"),o=(0,l.EW)(()=>"finish"===t.value?e.value.filter(e=>e.checked):"unfinish"===t.value?e.value.filter(e=>!e.checked):e.value),n=(0,l.EW)(()=>e.value.filter(e=>!e.checked).length),a=()=>d.A.get("https://todoo.5xcamp.us/todos").then(t=>{e.value=t.data.todos.map(e=>({id:e.id,content:e.content,checked:!!e.completed_at}))}).catch(e=>console.log(e)),s=e=>{e.trim()&&d.A.post("https://todoo.5xcamp.us/todos",{todo:{content:e}}).then(e=>{(0,r.P)("success","新增資料成功"),a()}).catch(e=>console.log(e))},i=e=>d.A.put(`https://todoo.5xcamp.us/todos/${e.id}`,{todo:{content:e.content}}).then(e=>{(0,r.P)("success","編輯資料成功"),a()}).catch(e=>console.log(e)),u=e=>d.A.delete(`https://todoo.5xcamp.us/todos/${e.id}`).then(e=>{(0,r.P)("success","刪除資料成功"),a()}).catch(e=>console.log(e)),h=e=>d.A.patch(`https://todoo.5xcamp.us/todos/${e}/toggle`).then(e=>{a()}),v=()=>{const t=e.value.filter(e=>e.checked);let o=0;t.forEach(e=>{d.A.delete(`https://todoo.5xcamp.us/todos/${e.id}`).then(()=>{o++,o===t.length&&a()})}),(0,r.P)("success","已刪除所有完成項目")};return{todos:e,currentFilter:t,filteredTodos:o,unfinishCount:n,getTodos:a,addTodo:s,editTodo:i,toggleTodo:h,delTodo:u,clearCompleted:v}});var h=o(8602),v=o(1387),k=o(4874),A=o.n(k);const p={class:"todolist_page bg-primary p-3"},m={class:"d-flex flex-row"},f={class:"ms-auto"},g={class:"d-none d-md-inline"},C={class:"container todolist"},L={class:"card input flex-row justify-content-between"},S={class:"card card_list"},T={class:"tab"},z={class:"cart_content"},Q={class:"list"},x={class:"checkbox"},R=["onUpdate:modelValue","onChange"],M={class:"actions"},E=["onClick"],W=["onClick"],Y={class:"list_footer"};var I={__name:"Todolist",setup(e){const t=(0,v.rd)(),o=u(),i=(0,h.k)(),d=(0,c.KR)(""),r=(0,c.KR)(localStorage.getItem("nickname")||"");(0,l.sV)(()=>{o.getTodos()});const k=()=>{o.addTodo(d.value),d.value=""},I=async e=>{const{value:t}=await A().fire({title:"請輸入新的代辦內容",input:"text",inputValue:e.content,showCancelButton:!0,confirmButtonText:"確定修改",cancelButtonText:"取消",inputValidator:t=>t.trim()?t.trim()===e.content.trim()?"內容未修改":null:"內容不得為空值"});if(t&&t.trim()!==e.content.trim()){const l={...e,content:t.trim()};o.editTodo(l)}},V=()=>{i.logout(),t.push("/login")};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",m,[t[5]||(t[5]=(0,l.Lk)("img",{src:s,alt:"logo",class:"img-fluid"},null,-1)),(0,l.Lk)("div",f,[(0,l.Lk)("span",g,(0,n.v_)(r.value)+" 的代辦",1),(0,l.Lk)("a",{href:"#",class:"btn ms-2",onClick:V},"登出")])]),(0,l.Lk)("div",C,[(0,l.Lk)("div",L,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"input_text",placeholder:"新增待辦事項","onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),onKeydown:(0,a.jR)(k,["enter"])},null,544),[[a.Jo,d.value]]),(0,l.Lk)("a",{href:"#",class:"btn_add",onClick:(0,a.D$)(k,["prevent"])},"+")]),(0,l.Lk)("div",S,[(0,l.Lk)("ul",T,[(0,l.Lk)("li",{class:(0,n.C4)({active:"all"===(0,c.R1)(o).currentFilter}),onClick:t[1]||(t[1]=e=>(0,c.R1)(o).currentFilter="all")},"全部",2),(0,l.Lk)("li",{class:(0,n.C4)({active:"unfinish"===(0,c.R1)(o).currentFilter}),onClick:t[2]||(t[2]=e=>(0,c.R1)(o).currentFilter="unfinish")}," 待完成 ",2),(0,l.Lk)("li",{class:(0,n.C4)({active:"finish"===(0,c.R1)(o).currentFilter}),onClick:t[3]||(t[3]=e=>(0,c.R1)(o).currentFilter="finish")}," 已完成 ",2)]),(0,l.Lk)("div",z,[(0,l.Lk)("ul",Q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,c.R1)(o).filteredTodos,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("label",x,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox",class:"checkedMark","onUpdate:modelValue":t=>e.checked=t,onChange:t=>(0,c.R1)(o).toggleTodo(e.id)},null,40,R),[[a.lH,e.checked]]),(0,l.Lk)("span",null,(0,n.v_)(e.content),1)]),(0,l.Lk)("div",M,[(0,l.Lk)("a",{href:"#",class:"edit",onClick:(0,a.D$)(t=>I(e),["prevent"])},"✎",8,E),(0,l.Lk)("a",{href:"#",class:"delete",onClick:(0,a.D$)(t=>(0,c.R1)(o).delTodo(e),["prevent"])},"🗑",8,W)])]))),128))]),(0,l.Lk)("div",Y,[(0,l.Lk)("p",null,(0,n.v_)((0,c.R1)(o).unfinishCount)+" 個待完成項目",1),(0,l.Lk)("a",{href:"#",onClick:t[4]||(t[4]=(0,a.D$)((...e)=>(0,c.R1)(o).clearCompleted&&(0,c.R1)(o).clearCompleted(...e),["prevent"]))},"清除已完成項目")])])])])]))}};const V=I;var j=V}}]);
//# sourceMappingURL=919.450388ee.js.map